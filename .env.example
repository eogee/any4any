# 服务器配置
HOST=0.0.0.0
PORT=8888
PREVIEW_MODE=False                          # 是否启用预览模式，大模型响应内容需要人为确认或等待超时自动响应
PREVIEW_TIMEOUT=60                          # 预览超时时间（秒），默认1分钟
DELAY_MODE=False                            # 是否启用延迟模式，延迟模式下，系统会累积用户消息并延迟处理
DELAY_TIME=10                               # 延迟处理时间（秒），默认3秒，用户停止发送消息超过此时间才处理
KNOWLEDGE_BASE_ENABLED=False                # 是否启用知识库，启用后会根据用户问题从知识库中提取相关内容

# MCP配置
MCP_PORT=9999                               # MCP服务端口号
MCP_TRANSPORT=sse                           # MCP传输协议

# 认证配置
API_KEY=EMPTY
# 会话管理配置
SESSION_MAX_AGE=1800                        # 会话有效期，单位为秒，默认为30分钟
MAX_CONVERSATION_MESSAGES=20                # 最大对话轮次（消息数量）
MAX_CONVERSATION_TOKENS=8000                # 最大对话token数估算
ENABLE_CONVERSATION_TRUNCATION=True         # 是否启用对话截断

# 模型配置
EDGE_TTS_ENABLED=False                      # 是否启用edge-tts
EDGE_DEFAULT_VOICE=zh-CN-XiaoyiNeural       # edge-tts默认语音

# 模型按需加载配置 (默认不加载，只在首次调用时加载)
INDEX_TTS_MODEL_ENABLED=False               # 是否启用IndexTTS-1.5模型
ASR_MODEL_ENABLED=False                     # 是否启用ASR模型
RERANK_MODEL_ENABLED=False                  # 是否启用Rerank模型
EMBEDDING_MODEL_ENABLED=False               # 是否启用Embedding模型
LLM_MODEL_ENABLED=False                     # 是否启用LLM模型

# 模型路径配置 (按需加载的模型路径)
INDEX_TTS_MODEL_DIR=/mnt/c/models/IndexTTS-1.5          # IndexTTS-1.5模型模型路径
ASR_MODEL_DIR=/mnt/c/models/SenseVoiceSmall             # ASR模型模型路径
RERANK_MODEL_DIR=/mnt/c/models/bge-reranker-base        # Rerank模型模型路径
EMBEDDING_MODEL_DIR=/mnt/c/models/bge-small-zh-v1.5     # Embedding模型模型路径
LLM_MODEL_DIR=/mnt/c/models/Qwen3-0.6B                  # LLM模型模型路径
LLM_MODEL_NAME=Qwen3-0.6B                               # LLM模型名称
NO_THINK=True                                           # 是否禁用思考模式
ASR_PROMPT=                                             # ASR模型提示词

# 外部LLM API配置 (OpenAI兼容格式)
LLM_SERVER_TYPE=api                                     # LLM服务器类型：local（本地）或api（外部API）
EXTERNAL_API_KEY=your_external_api_key                  # 外部API密钥
API_BASE_URL=https://api.openai.com/v1/                 # API基础地址
MODEL_NAME=your_model_name                              # 外部API模型名称
API_TIMEOUT=120                                         # API请求超时时间（秒，建议120秒）
MAX_TOKENS=8192                                         # API最大tokens数
STREAM_ENABLED=true                                     # 外部API是否启用流式输出
API_MAX_RETRIES=3                                       # API请求最大重试次数
API_RETRY_DELAY=1.0                                     # API请求重试延迟（秒）

# LLM模型加载配置
TRUST_REMOTE_CODE=True                                  # 是否信任远程代码
USE_HALF_PRECISION=True                                 # 是否使用半精度
LOW_CPU_MEM_USAGE=True                                  # 是否使用低CPU内存
TOKENIZERS_PARALLELISM=False                            # 是否启用多线程分词

# 本地LLM模型生成参数配置
MAX_LENGTH=4096                                         # 最大生成长度
NUM_RETURN_SEQUENCES=1                                  # 生成序列数量
TEMPERATURE=0.7                                         # 温度参数，控制生成的随机性
TOP_P=0.9                                               # Top-p采样参数，控制生成的多样性
REPETITION_PENALTY=1.1                                  # 重复惩罚参数，控制生成的多样性
LLM_PROMPT=no_think                                     # LLM模型提示词 （Qwen系列模型专用）

# EMBEDDING模型配置
TOP_K=3                                                 # 取前k个最相似的向量
VECTOR_DB_PATH=data/vector_db                           # 向量数据库路径
DOCS_PATH=data/docs                                     # 文档路径
DOC_CHUNK_SIZE=500                                      # 文档处理器文本分块大小
DOC_CHUNK_OVERLAP=50                                    # 文档处理器文本分块重叠大小
SUPPORTED_FILE_TYPES=['.pdf', '.docx', '.txt']          # 支持的文件类型

# RERANK模型配置
RERANK_CANDIDATE_FACTOR=10                              # 重排序候选文档倍数
RERANK_BATCH_SIZE=16                                    # 重排序批处理大小

# IndexTTS-1.5引擎配置
INDEX_TTS_FAST_ENABLED=True                             # 是否启用IndexTTS-1.5快速推理模式
INDEX_TTS_FAST_MAX_TOKENS=20                            # 快速模式：分句的最大token数（越小越快，默认50）
INDEX_TTS_FAST_BATCH_SIZE=64                            # 快速模式：分句分桶的最大容量（越大越快，默认16）
INDEX_TTS_STREAMING_MIN_SENTENCE_CHARS=15               # 流式模式最小句子字符数（避免过度碎片化）
INDEX_TTS_DEVICE=cuda                                   # IndexTTS-1.5设备类型
INDEX_TTS_MAX_WORKERS=4                                 # IndexTTS-1.5最大并发数
INDEX_TTS_TIMEOUT=60                                    # IndexTTS-1.5超时时间，单位为秒
INDEX_TTS_REFERENCE_AUDIO=default.wav                   # IndexTTS-1.5默认参考音频文件名

# 工具配置
TOOLS_ENABLED=True                                      # 是否启用工具系统

# 时间工具配置
TIME_TOOLS_ENABLED=True                                 # 是否启用时间工具（支持自然语言时间解析）
TIME_ZONE=Asia/Shanghai                                 # 时区设置
TIME_FORMAT_DEFAULT=%Y-%m-%d %H:%M:%S                   # 默认时间格式

# 数据库配置
MYSQL_HOST=172.21.48.1
MYSQL_PORT=3306
MYSQL_USER=root
MYSQL_PASSWORD=root
MYSQL_DATABASE=any4any

# 数据库功能开关
QUERY_CLEANING=True                                     # 是否启用数据库查询清理功能

# MySQL连接池配置
DB_POOL_ENABLED=True                                    # 是否启用数据库连接池
DB_POOL_SIZE=15                                         # 连接池大小
DB_POOL_TIMEOUT=30                                      # 连接池获取连接超时时间(秒)
DB_POOL_RECYCLE=1800                                    # 连接回收时间(秒)
DB_POOL_PRE_PING=True                                   # 连接前检查连接有效性

# 熔断器配置
DB_CIRCUIT_BREAKER_ENABLED=True                         # 是否启用熔断器
DB_CIRCUIT_BREAKER_THRESHOLD=5                          # 熔断器失败阈值
DB_CIRCUIT_BREAKER_TIMEOUT=60                           # 熔断器恢复时间(秒)

# 重试机制配置
DB_RETRY_ENABLED=True                                   # 是否启用重试机制
DB_RETRY_MAX_ATTEMPTS=3                                 # 最大重试次数
DB_RETRY_BACKOFF_FACTOR=2                               # 重试退避因子
DB_RETRY_MAX_DELAY=30                                   # 最大重试延迟(秒)

# SQL数据库配置 (NL2SQL工具)
SQL_DB_TYPE=mysql
SQL_DB_HOST=172.21.48.1
SQL_DB_PORT=3306
SQL_DB_USERNAME=root
SQL_DB_PASSWORD=root
SQL_DB_DATABASE=any4any

# any4dh 数字人配置
ANY4DH_ENABLED=True                                     # 是否启用any4dh数字人
ANY4DH_USE_UNIFIED_INTERFACE=True                       # 是否使用统一接口
ANY4DH_TRANSPORT=webrtc                                 # any4dh多媒体传输方式
ANY4DH_MODEL=wav2lip                                    # 唇形同步模型
ANY4DH_WAV2LIP_MODEL_DIR=/mnt/c/models/wav2lip256/wav2lip.pth   # wav2lip模型路径
ANY4DH_AVATAR_ID=001                                    # 头像ID
ANY4DH_BATCH_SIZE=16                                    # 模型处理批量处理大小
ANY4DH_FPS=50                                           # 视频帧率
ANY4DH_TTS=indextts                                     # 唇形同步TTS模型
ANY4DH_REF_FILE=zh-CN-YunxiaNeural                      # 唇形同步参考音频文件
ANY4DH_REF_TEXT=                                        # 唇形同步参考文本
ANY4DH_TTS_SERVER=http://127.0.0.1:9880                 # 唇形同步TTS服务地址
ANY4DH_MAX_SESSION=1                                    # 最大会话数
ANY4DH_AVATARS_DIR=data/avatars                         # any4dh人物模型目录

# any4dh 语音知识库配置
ANY4DH_VOICE_KB_ENABLED=False                            # 是否启用语音知识库
ANY4DH_VOICE_KB_LANGUAGE=zh                              # 语音知识库语言 (zh/en)
ANY4DH_VOICE_KB_FALLBACK_TO_TTS=True                     # 是否在未找到匹配时回退到TTS
ANY4DH_VOICE_KB_SEMANTIC_THRESHOLD=0.1                   # 语音语义匹配阈值（低于此值使用LLM生成）
VOICE_KB_CSV_PATH=data/csv/en_voice_list.csv             # 语音知识库CSV文件路径
VOICE_KB_AUDIO_DIR=data/en_answer                        # 语音知识库音频文件目录

# 钉钉配置
DINGTALK_ENABLED=False                                    # 是否启用钉钉机器人服务
CLIENT_ID=your_dingtalk_bot_client_id                     # 钉钉机器人客户端ID
CLIENT_SECRET=your_dingtalk_bot_client_secret             # 钉钉机器人客户端密钥
ROBOT_CODE=your_dingtalk_bot_robot_code                   # 钉钉机器人机器人密钥
DINGTALK_PORT=6666                                        # 钉钉机器人服务端口号