# any4any: Enterprise Multimodal AI Platform - LLM Conversations, Digital Humans, Intelligent Queries, Speech Processing, and Knowledge Base Systems

<div align="center">
    <a href="https://zread.ai/eogee/any4any"><img src="https://img.shields.io/badge/Ask_Zread-_.svg?style=flat&color=00b0aa&labelColor=000000&logo=data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTQuOTYxNTYgMS42MDAxSDIuMjQxNTZDMS44ODgxIDEuNjAwMSAxLjYwMTU2IDEuODg2NjQgMS42MDE1NiAyLjI0MDFWNC45NjAxQzEuNjAxNTYgNS4zMTM1NiAxLjg4ODEgNS42MDAxIDIuMjQxNTYgNS42MDAxSDQuOTYxNTZDNS4zMTUwMiA1LjYwMDEgNS42MDE1NiA1LjMxMzU2IDUuNjAxNTYgNC45NjAxVjIuMjQwMUM1LjYwMTU2IDEuODg2NjQgNS4zMTUwMiAxLjYwMDEgNC45NjE1NiAxLjYwMDFaIiBmaWxsPSIjZmZmIi8%2BCjxwYXRoIGQ9Ik00Ljk2MTU2IDEwLjM5OTlIMi4yNDE1NkMxLjg4ODEgMTAuMzk5OSAxLjYwMTU2IDEwLjY4NjQgMS42MDE1NiAxMS4wMzk5VjEzLjc1OTlDMS42MDE1NiAxNC4xMTM0IDEuODg4MSAxNC4zOTk5IDIuMjQxNTYgMTQuMzk5OUg0Ljk2MTU2QzUuMzE1MDIgMTQuMzk5OSA1LjYwMTU2IDE0LjExMzQgNS42MDE1NiAxMy43NTk5VjExLjAzOTlDNS42MDE1NiAxMC42ODY0IDUuMzE1MDIgMTAuMzk5OSA0Ljk2MTU2IDEwLjM5OTlaIiBmaWxsPSIjZmZmIi8%2BCjxwYXRoIGQ9Ik0xMy43NTg0IDEuNjAwMUgxMS4wMzg0QzEwLjY4NSAxLjYwMDEgMTAuMzk4NCAxLjg4NjY0IDEwLjM5ODQgMi4yNDAxVjQuOTYwMUMxMC4zOTg0IDUuMzEzNTYgMTAuNjg1IDUuNjAwMSAxMS4wMzg0IDUuNjAwMUgxMy43NTg0QzE0LjExMTkgNS42MDAxIDE0LjM5ODQgNS4zMTM1NiAxNC4zOTg0IDQuOTYwMVYyLjI0MDFDMTQuMzk4NCAxLjg4NjY0IDE0LjExMTkgMS42MDAxIDEzLjc1ODQgMS42MDAxWiIgZmlsbD0iI2ZmZmIvPgo8cGF0aCBkPSJNNCAxMkwxMiA0TDQgMTJaIiBmaWxsPSIjZmZmIi8%2BCjxwYXRoIGQ9Ik00IDEyTDEyIDQiIHN0cm9rZT0iI2ZmZmIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8%2BCjxwL3N2Zz4K&logoColor=ffffff"></a>
    <a href="./LICENSE"><img src="https://img.shields.io/badge/license-MIT-dfd.svg"></a>
    <a href=""><img src="https://img.shields.io/badge/python-3.10+-aff.svg"></a>
    <a href=""><img src="https://img.shields.io/badge/os-linux%2C%20win%2C%20mac-pink.svg"></a>
    <a href="https://github.com/eogee/any4any/releases"><img src="https://img.shields.io/github/v/release/eogee/any4any?display_name=tag&include_prereleases"></a>
</div>

<div align="center">
  <a href="../README.md">中文简体</a> ·
  English
</div>

## Project Overview

any4any is an enterprise-level multimodal AI platform providing comprehensive intelligent interaction solutions. It integrates large language model conversations, digital human systems, intelligent SQL queries, speech processing, knowledge base systems, and other core functionalities, supporting OpenAI-compatible API interfaces for seamless integration into various AI applications.

**Core Features**:
- **Multimodal AI Interaction**: Supports comprehensive intelligent interactions across text, speech, and video
- **Digital Human System**: Real-time lip sync and speech-driven digital human interactions
- **Intelligent Queries**: Natural language to SQL intelligent database queries
- **Knowledge Base System**: Vector retrieval-based intelligent knowledge management and Q&A
- **Speech Processing**: High-quality speech recognition and synthesis
- **Unified Interface**: OpenAI-compatible APIs supporting various model management applications

## Features

### Core Function Modules

#### Any4DH Digital Human System
- **Real-time Digital Human Interaction**: WebRTC-based real-time audio/video stream processing
- **Intelligent Lip Sync**: Wav2Lip technology for precise audio-video synchronization
- **Unified Interface Support**: Deep integration with LLM systems, supporting voice knowledge base
- **Multi-transport Protocol**: Supports WebRTC, RTMP, and other transmission methods
- **Session Management**: Supports multi-user concurrent digital human interactions

#### Intelligent Conversation System
- **Web Chat Interface**: Complete web chat interface supporting streaming and non-streaming responses
- **External LLM Integration**: Supports OpenAI, Qwen, and other compatible APIs
- **Conversation Management**: Multi-platform conversation history tracking and context-aware continuous dialogue
- **Preview Mode**: Supports content preview and editing functionality
- **Markdown Rendering**: Real-time message display and history management

#### NL2SQL Intelligent Query System
- **Context-aware Queries**: Intelligent context retrieval based on conversation history
- **8-step Workflow**: Complete natural language to SQL conversion process
- **Follow-up Recognition**: Supports follow-up keywords like "respectively", "all", "who", etc.
- **Secure Queries**: Multi-layer SQL security verification, only allowing SELECT queries
- **Intelligent Result Generation**: Natural language answers based on query results

#### Knowledge Base System
- **BGE Model Integration**: Uses BGE-Small-ZH and reranking models
- **Multi-format Document Processing**: Supports PDF, DOCX, TXT, and other formats
- **Semantic Retrieval**: High-efficiency vector retrieval based on ChromaDB
- **OpenAI-compatible API**: Provides standard embedding API interfaces
- **Intelligent Q&A**: Intelligent answer generation combining retrieval results

#### Speech Processing System
- **Dual Engine Support**: EdgeTTS cloud service and IndexTTS-1.5 local model
- **Intelligent Text Filtering**: 13-layer filtering strategy removing content affecting speech synthesis
- **High-performance Processing**: Supports IndexTTS-1.5 fast mode and streaming audio generation
- **Intelligent File Management**: Global temporary file manager supporting automatic cleanup
- **Asynchronous Processing**: High-concurrency speech synthesis based on FastAPI

#### Tool Systems & MCP Services
- **Tool Manager**: Unified tool identification, registration, and execution framework
- **Voice Knowledge Base**: Semantic matching-based intelligent voice responses
- **MCP Protocol Support**: Build MCP tools and interfaces, supporting MCP client calls
- **DingTalk Bot**: Supports DingTalk bot message processing and intelligent replies

## Update Log

### V0.1.3 (2025.11.01) - Major Feature Upgrade

#### Digital Human System Launch
- **Any4DH Digital Human System**: Complete real-time digital human interaction platform
  - WebRTC transmission protocol support
  - Real-time speech processing and lip sync
  - Stream media processing and face detection
  - Unified interface and session management

#### Intelligent Conversation System Comprehensive Upgrade
- **Web Chat Functionality**: Complete web chat interface
  - Real-time message display and history management
  - Markdown format rendering
  - Preview mode and delay mode support
  - User authentication and session management

- **External LLM API Integration**: Supports OpenAI, Qwen, and other compatible APIs
  - API key management and retry mechanisms
  - Streaming and non-streaming response support

#### NL2SQL Intelligent Query System Enhancement
- **Context-aware Queries**: SQLContextManager intelligent context management
  - Conversation history intelligent analysis
  - Relevance scoring algorithms
  - Automatic context construction
  - Follow-up mechanism support

- **Workflow Optimization**: 8-step complete workflow
  - Automatic context enhancement
  - Error handling and fault tolerance mechanisms

#### Voice Knowledge Base System
- **Voice Retrieval Functionality**: Semantic matching-based intelligent voice responses
  - Voice data management
  - Semantic retrieval engine
  - Voice workflow
  - Multi-language voice library support

#### Technical Architecture Upgrade
- **Frontend Architecture Refactoring**: New chat interface, digital human control panel
- **Backend Service Extension**: Chat server, digital human server
- **Tool System Refactoring**: Tool management logic refactoring and SQL question identification enhancement
- **TTS System Optimization**: Unified temporary file management, streaming TTS processing

#### Other Important Updates
- **Intelligent Text Filtering**: Added 13-layer filtering strategy, including thought content filtering
- **Unified Model Management**: ModelManager implements model on-demand loading and unified management
- **Configuration Management Upgrade**: Added digital human, voice knowledge base, external LLM and other configurations
- **Documentation Enhancement**: Added Any4DH, NL2SQL, voice knowledge base and other detailed documentation

---

**Historical Version Updates**:

**V0.1.2 (2025.10.24): New Intelligent SQL Query and IndexTTS-1.5 Support**
- NL2SQL Intelligent Query System: Natural language to SQL conversion functionality
- IndexTTS-1.5 Voice Engine: High-quality local TTS engine support

**V0.1.1 (2025.10.08): Added Embedding Model Module**
- Embedding Module: Complete embedding model support, including document processing, vector storage, retrieval engine
- Knowledge Base System: ChromaDB vector database-based knowledge base construction and management

**V0.1.0 (2025.9.26): Added Conversation Management and Preview Mode Features**
- Conversation Management: Multi-platform conversation management and history tracking
- Preview Mode: Content preview and editing functionality
- DingTalk Bot Integration: Supports DingTalk bot message processing

## Environment Requirements

### Basic Environment
- **Python**: 3.10+
- **Operating System**: Linux, Windows, macOS
- **Memory**: Recommended 8GB+ (AI model operation requires)
- **Storage**: Additional 20GB for model files
- **GPU**: Recommended for AI model acceleration (optional)

### Dependent Environment
- **WSL2**: Required for Windows systems
- **Conda**: Python environment management
- **MySQL**: Database service (conversation storage and NL2SQL functionality)
- **FFmpeg**: Audio processing library

## Installation Guide

### 1. Clone the Project

```bash
git clone https://github.com/eogee/any4any.git
# Or
git clone https://gitee.com/eogee/any4any.git
# Or
git clone https://gitcode.com/eogee/any4any.git
```

> Cloud storage download: https://pan.quark.cn/s/fbe126d5bd75

### 2. Download AI Models

> Recommended one-stop access from cloud storage: https://pan.quark.cn/s/c65799f2cb93

```bash
# Ensure git-lfs is installed
git lfs install

# Download speech recognition model: SenseVoiceSmall
git clone https://huggingface.co/FunAudioLLM/SenseVoiceSmall

# Download reranking model: bge-reranker-base
git clone https://huggingface.co/BAAI/bge-reranker-base

# Download LLM model: Qwen3-0.6B
git clone https://huggingface.co/Qwen/Qwen3-0.6B

# Download Embedding model: bge-small-zh-v1.5
git clone https://huggingface.co/BAAI/bge-small-zh-v1.5

# Download IndexTTS-1.5 model
git clone https://hf-mirror.com/IndexTeam/IndexTTS-1.5

# Download Wav2Lip model (digital human functionality)
git clone https://huggingface.co/charlesXu/wav2lip
```

### 3. Create Python Environment

```bash
# Create conda environment
conda create -n any4any python=3.10
# Activate environment
conda activate any4any
```

### 4. Install Dependencies

```bash
# Install ffmpeg
sudo apt-get install ffmpeg

# Verify ffmpeg installation
ffmpeg -version

# Install Python dependencies
pip install -r requirements.txt
```

### 5. Configure Environment Variables

```bash
# Copy configuration file
cp .env.example .env
```

**Important Configuration Items**:
```bash
# Database configuration
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USER=root
MYSQL_PASSWORD=root
MYSQL_DATABASE=any4any

# SQL database configuration (NL2SQL functionality)
SQL_DB_TYPE=mysql
SQL_DB_HOST=localhost
SQL_DB_PORT=3306
SQL_DB_USERNAME=root
SQL_DB_PASSWORD=root
SQL_DB_DATABASE=your_database_name

# Model path configuration
LLM_MODEL_DIR=/path/to/Qwen3-0.6B
ASR_MODEL_DIR=/path/to/SenseVoiceSmall
RERANK_MODEL_DIR=/path/to/bge-reranker-base
EMBEDDING_MODEL_DIR=/path/to/bge-small-zh-v1.5
INDEX_TTS_MODEL_DIR=/path/to/IndexTTS-1.5

# Digital human system configuration
ANY4DH_ENABLED=true
ANY4DH_TRANSPORT=webrtc
ANY4DH_MODEL=wav2lip

# Tool system configuration
TOOLS_ENABLED=true
```

### 6. Start the Service

```bash
# Start service directly
python cli.py

# Or use shortcut command (WSL/Linux environments)
sudo cp a4a-run.sh /usr/local/bin/a4a-run
sudo chmod +x /usr/local/bin/a4a-run
# After installation, use directly
a4a-run
```

**Service Ports**:
- **Main Service**: http://localhost:8888
- **MCP Service**: http://localhost:9999
- **DingTalk Service**: http://localhost:6666

### 7. Function Verification

#### Digital Human System
Access: http://localhost:8888/dh/dashboard
- Real-time digital human interaction
- Audio/video stream control
- Real-time parameter adjustment

#### Intelligent Conversation System
Access: http://localhost:8888/index/
- Web chat interface
- Conversation history management
- Markdown rendering

#### NL2SQL Intelligent Query
Directly use natural language to query databases in conversation:
```
User: How many orders are there?
System: Based on the query results, there are currently 15 orders.

User: Count the number of products in each category
System: Product count statistics by category: Electronics have 8 items, Home goods have 12 items, Clothing has 5 items.
```

## API Interface Usage

### OpenAI Compatible Interface

The project provides complete OpenAI-compatible API interfaces that can be added to any model management application for use.

#### Main Interface Endpoints
- **LLM Conversation**: `/v1/chat/completions`
- **Speech Synthesis**: `/v1/audio/speech`
- **Speech Recognition**: `/v1/audio/transcriptions`
- **Text Embedding**: `/v1/embeddings`
- **Document Reranking**: `/v1/rerank`
- **API Documentation**: http://localhost:8888/docs

### Model Integration Examples

#### TTS Model Configuration
```bash
# edge-tts engine
Model Type: TTS
Model Name: edge-tts
API endpoint URL: http://host.docker.internal:8888/v1
API Key: EMPTY
Available Voices: zh-CN-XiaoyiNeural

# IndexTTS-1.5 engine
Model Type: TTS
Model Name: IndexTTS-1.5
API endpoint URL: http://host.docker.internal:8888/v1
API Key: EMPTY
```

#### ASR Model Configuration
```bash
Model Type: Speech2text
Model Name: SenseVoiceSmall
API Key: EMPTY
API endpoint URL: http://host.docker.internal:8888/v1
```

#### LLM Model Configuration
```bash
Model Type: LLM
Model Name: Qwen3-0.6B
API Key: EMPTY
API endpoint URL: http://host.docker.internal:8888/v1
```

#### Embedding Model Configuration
```bash
Model Type: Embedding
Model Name: bge-small-zh-v1.5
API Key: EMPTY
API endpoint URL: http://host.docker.internal:8888/v1
```

#### Rerank Model Configuration
```bash
Model Type: rerank
Model Name: bge-reranker-base
API Key: EMPTY
API endpoint URL: http://host.docker.internal:8888/v1
```

## Project Architecture

```
any4any/
├── core/                           # Core functionality modules
│   ├── any4dh/                     # Digital human system module
│   │   ├── any4dh_server.py        # Digital human server
│   │   ├── live_talking/           # Real-time speech processing
│   │   ├── wav2lip/                # Wav2Lip lip sync
│   │   └── streaming_utils.py      # Stream media processing
│   ├── asr/                        # Speech recognition module
│   ├── auth/                       # Authentication module
│   ├── chat/                       # Intelligent conversation module
│   │   ├── conversation_manager.py # Conversation manager
│   │   ├── external_llm.py         # External LLM integration
│   │   ├── openai_api.py           # OpenAI API compatible interface
│   │   └── tool_manager.py         # Tool manager
│   ├── database/                   # Database module
│   ├── dingtalk/                   # DingTalk bot module
│   ├── embedding/                  # Knowledge base system module
│   │   ├── document_processor.py   # Document processor
│   │   ├── embedding_manager.py    # Embedding manager
│   │   ├── retrieval_engine.py     # Retrieval engine
│   │   └── vector_store.py          # Vector store
│   ├── tools/                      # Tool module
│   │   ├── nl2sql/                 # NL2SQL intelligent query
│   │   └── voice_kb/               # Voice knowledge base
│   ├── tts/                        # Speech synthesis module
│   │   ├── index_tts_engine.py     # IndexTTS-1.5 engine
│   │   ├── filter.py               # Text filter
│   │   └── temp_file_manager.py    # Temporary file manager
│   └── model_manager.py            # Model manager
├── servers/                        # Network service modules
│   ├── ChatServer.py               # Chat server
│   └── DHServer.py                  # Digital human server
├── static/                         # Frontend resources
│   ├── index/                      # Main interface
│   │   └── chat/                   # Chat interface
│   └── js/                         # JavaScript modules
├── data_models/                    # Data model definitions
├── docs/                           # Project documentation
├── workflows/                      # Workflow configuration
├── app.py                          # Application entry
├── cli.py                          # Command-line interface
├── config.py                       # Configuration file
└── .env.example                    # Environment variable example
```

## Detailed Documentation

- [Conversation Management System Documentation](./zh/会话管理系统说明文档.md)
- [NL2SQL Intelligent Query System Documentation](./zh/NL2SQL智能查询系统说明文档.md)
- [Knowledge Base System Documentation](./zh/知识库系统说明文档.md)
- [TTS Implementation and Integration Documentation](./zh/TTS实现与集成说明文档.md)
- [Any4DH System Documentation](./zh/any4dh系统说明文档.md)
- [Version Release Update Documentation](./version_notes/zh/V0.1.3_release_notes.md)

## Related Open Source Projects

- **edge-tts**: Microsoft Edge TTS API - https://github.com/rany2/edge-tts
- **IndexTTS-1.5**: High-quality Chinese speech synthesis - https://huggingface.co/IndexTeam/IndexTTS-1.5
- **SenseVoice**: Multi-language speech recognition - https://github.com/FunAudioLLM/SenseVoice
- **Wav2Lip**: Lip sync technology - https://github.com/Rudrabha/Wav2Lip
- **bge-reranker-base**: Document reranking model - https://huggingface.co/BAAI/bge-reranker-base
- **bge-small-zh-v1.5**: Chinese text embedding - https://huggingface.co/BAAI/bge-small-zh-v1.5
- **Qwen3-0.6B**: High-performance language model - https://huggingface.co/Qwen/Qwen3-0.6B
- **FastAPI**: Modern Web framework - https://github.com/fastapi/fastapi
- **ChromaDB**: Vector database - https://github.com/chroma-core/chroma

## Future Planning

### Short-term Plan (V0.1.4)
- Performance monitoring and optimization system
- User feedback collection and processing mechanism
- Documentation enhancement and example supplementation
- Unit test coverage improvement

### Medium-term Plan (V0.2.0)
- Mobile application support
- More AI model integration
- Enterprise-level feature extension
- Cloud-native deployment support

### Long-term Planning (V1.0.0)
- Distributed architecture support
- Multi-tenant management system
- Advanced analysis dashboard
- Ecosystem construction

## Technical Support

- **Official Website**: https://eogee.com
- **Email**: eogee@qq.com
- **Bilibili**: https://space.bilibili.com/315734619
- **Douyin**: [Douyin eogee](https://www.douyin.com/user/MS4wLjABAAAAdH5__CXhFJtSrDQKNuI_vh4mI4-LdyQ_LPKB4d9gR3gISMC_Ak0ApCjFYy_oxhf) (Live streaming nightly at 8 PM)
- **GitHub Issues**: Project issue feedback and feature suggestions

## License

This project is licensed under the [MIT License](./LICENSE).

---

<div align="center">
  <strong>Thank you for your attention to the any4any project!</strong><br>
  <em>ANY FOR ANY, a multimodal AI open source platform widely trusted by developers and enterprise users!</em>
</div>